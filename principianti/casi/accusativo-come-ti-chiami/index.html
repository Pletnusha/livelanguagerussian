<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accusativo - come ti chiami | LIVE LANGUAGE_RUSSIAN</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
</head>
<body class="page-accusativo-come-ti-chiami">

    <header class="page-header">
        <a href="/principianti.html" class="back-link">‚Üê Torna indietro</a>
    </header>

    <section class="argomento-header">
        <h1 class="argomento-title">ACCUSATIVO</h1>
        <p class="argomento-focus">come ti chiami</p>
    </section>

    <section class="argomento-intro">
        <p>In questa unit√† imparerai a presentarti e a chiedere il nome usando l'accusativo. Pratica con situazioni reali: presentazioni, incontri informali e conversazioni quotidiane.</p>
    </section>

    <main class="exercises-section">

        <article class="exercise-card" data-status="open" data-target="panel-acc-open-1">
            <span class="exercise-type">Drag &amp; Drop</span>
            <h3 class="exercise-title">Presentare se stesso e la propria famiglia</h3>
        </article>

        <div class="exercise-panel" id="panel-acc-open-1" hidden>
            <section id="ex-accusativo-trascina-01">
    <div id="ex-accusativo-trascina-01-container"></div>
    <div id="ex-accusativo-trascina-01-completion" style="display:none;"></div>
</section>

<script type="text/plain" data-lazy-script="panel-acc-open-1">
(() => {
    const root = document.getElementById('ex-accusativo-trascina-01');
    const exerciseContainer = root.querySelector('#ex-accusativo-trascina-01-container');
    const completionScreen = root.querySelector('#ex-accusativo-trascina-01-completion');

    const exercises = [
        {
            instruction: "Completa la frase scegliendo 2 espressioni",
            text: " {{1}} –∑–æ–≤—É—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä, –∞ {{2}} –∑–æ–≤—É—Ç –õ–∏–∑–∞.",
            words: ["–º–æ–π –±—Ä–∞—Ç", "–º–æ–µ–≥–æ –±—Ä–∞—Ç–∞", "–º–æ—é —Å–µ—Å—Ç—Ä–∞", "–º–æ—é —Å–µ—Å—Ç—Ä—É"],
            correctAnswers: { 1: "–º–æ–µ–≥–æ –±—Ä–∞—Ç–∞", 2: "–º–æ—é —Å–µ—Å—Ç—Ä—É" }
        },
        {
            instruction: "Completa la frase scegliendo 2 espressioni",
            text: "{{1}} –∑–æ–≤—É—Ç –í–ª–∞–¥–∏—Å–ª–∞–≤, {{2}} –∑–æ–≤—É—Ç –ï–ª–µ–Ω–∞.",
            words: ["–º–æ—é –¥–µ–¥—É—à–∫—É", "–º–æ—é –±–∞–±—É—à–∫—É", "–º–æ–µ–≥–æ –¥–µ–¥—É—à–∫—É"],
            correctAnswers: { 1: "–º–æ–µ–≥–æ –¥–µ–¥—É—à–∫—É", 2: "–º–æ—é –±–∞–±—É—à–∫—É" }
        },
        {
            instruction: "Completa la frase scegliendo 2 espressioni",
            text: "{{1}} –∑–æ–≤—É—Ç –°–≤–µ—Ç–ª–∞–Ω–∞, –∞  {{2}} –∑–æ–≤—É—Ç –ê–Ω–∞—Ç–æ–ª–∏–π.",
            words: ["–º–æ—é —Ç—ë—Ç—é", "–º–æ–µ–≥–æ –º—É–∂–∞", "–µ—ë –º—É–∂–∞"],
            correctAnswers: { 1: "–º–æ—é —Ç—ë—Ç—é", 2: "–µ—ë –º—É–∂–∞" }
        },
        {
            instruction: "Completa la frase scegliendo 2 espressioni",
            text: "{{1}} –∑–æ–≤—É—Ç –°–µ–º—ë–Ω, {{2}} –∑–æ–≤—É—Ç –õ–∏–¥–∏—è.",
            words: ["–º–æ—é —Å–æ—Å–µ–¥–∞", "–º–æ—é –∂–µ–Ω—É", "–µ–≥–æ –∂–µ–Ω—É", "–º–æ–µ–≥–æ —Å–æ—Å–µ–¥–∞"],
            correctAnswers: { 1: "–º–æ–µ–≥–æ —Å–æ—Å–µ–¥–∞", 2: "–µ–≥–æ –∂–µ–Ω—É" }
        },
        {
            instruction: "Completa la frase scegliendo 2 espressioni",
            text: "{{1}} –∑–æ–≤—É—Ç –ê–Ω—Ç–æ–Ω, –∞ –∫–∞–∫ –∑–æ–≤—É—Ç {{2}}?",
            words: ["–Ω–∞—à—É –¥–æ—á—å", "–Ω–∞—à —Å—ã–Ω", "–≤–∞—à—É –¥–æ—á—å", "–Ω–∞—à–µ–≥–æ —Å—ã–Ω–∞"],
            correctAnswers: { 1: "–Ω–∞—à–µ–≥–æ —Å—ã–Ω–∞", 2: "–≤–∞—à—É –¥–æ—á—å" }
        },
        {
            instruction: "Completa la frase scegliendo 2 espressioni",
            text: "{{1}} –∑–æ–≤—É—Ç –ù–∏–∫–æ–ª–∞–π, –∞ {{2}} –∑–æ–≤—É—Ç –ö–∞—Ç—è.",
            words: ["–ò—Ö –¥—è–¥—é", "–µ–≥–æ –∂–µ–Ω–∞", "–µ–≥–æ –∂–µ–Ω—É", "–∏—Ö –¥—è–¥—è"],
            correctAnswers: { 1: "–ò—Ö –¥—è–¥—é", 2: "–µ–≥–æ –∂–µ–Ω—É" }
        },
        {
            instruction: "Completa la frase scegliendo 2 espressioni",
            text: "{{1}} –∑–æ–≤—É—Ç –î–∏–º–∞, –∞ {{2}} –∑–æ–≤—É—Ç –ê–Ω–Ω–∞.",
            words: ["–µ–≥–æ –¥–µ–≤—É—à–∫—É", "–º–æ—é –¥–µ–≤—É—à–∫—É", "–º–æ–µ–≥–æ –¥—Ä—É–≥–∞"],
            correctAnswers: { 1: "–º–æ–µ–≥–æ –¥—Ä—É–≥–∞", 2: "–µ–≥–æ –¥–µ–≤—É—à–∫—É" }
        },
        {
            instruction: "Completa la frase scegliendo 2 espressioni",
            text: "{{1}} –∑–æ–≤—É—Ç –ë–æ—Ä–∏—Å, –∞ {{2}} –∑–æ–≤—É—Ç –û–ª—å–≥–∞.",
            words: ["–º–æ–π –ø–∞—Ä–µ–Ω—å", "–µ–≥–æ —Å–µ—Å—Ç—Ä—É", "–º–æ–µ–≥–æ –ø–∞—Ä–Ω—è", "–º–æ—é —Å–µ—Å—Ç—Ä—É"],
            correctAnswers: { 1: "–º–æ–µ–≥–æ –ø–∞—Ä–Ω—è", 2: "–µ–≥–æ —Å–µ—Å—Ç—Ä—É" }
        },
        {
            instruction: "Completa la frase scegliendo 2 espressioni",
            text: "{{1}} –∑–æ–≤—É—Ç –í–∏–∫—Ç–æ—Ä–∏—è, –∞ {{2}} –∑–æ–≤—É—Ç –ë–∞—Ä—Å–∏–∫.",
            words: ["–µ–≥–æ –∫–æ—Ç–∞", "–º–æ–µ–≥–æ –ø–æ–¥—Ä—É–≥—É", "–º–æ—é –ø–æ–¥—Ä—É–≥—É", "–µ—ë –∫–æ—Ç–∞"],
            correctAnswers: { 1: "–º–æ—é –ø–æ–¥—Ä—É–≥—É", 2: "–µ—ë –∫–æ—Ç–∞" }
        },
        {
            instruction: "Completa la frase scegliendo 2 espressioni",
            text: "{{1}} –∑–æ–≤—É—Ç –ë–µ–ª–∫–∞, –∞ {{2}} –∑–æ–≤—É—Ç –ú—É—Ä–∫–∞.",
            words: ["–Ω–∞—à–µ–≥–æ —Å–æ–±–∞–∫—É", "–Ω–∞—à—É –∫–æ—à–∫—É", "–Ω–∞—à—É —Å–æ–±–∞–∫—É", "–Ω–∞—à–µ–≥–æ –∫–æ—Ç–∞"],
            correctAnswers: { 1: "–Ω–∞—à—É —Å–æ–±–∞–∫—É", 2: "–Ω–∞—à—É –∫–æ—à–∫—É" }
        }
    ];

    let currentExerciseIndex = 0;
    let exerciseResults = [];
    let checked = false;
    let gapElements = [];
    let wordElements = [];

    function loadExercise(index) {
        if (index >= exercises.length) {
            showCompletion();
            return;
        }

        checked = false;
        const exercise = exercises[index];

        exerciseContainer.innerHTML = `
            <div class="header">
                <div class="exercise-counter">Esercizio ${index + 1} di ${exercises.length}</div>
            </div>
            <div class="instruction">${exercise.instruction}</div>
            <div class="exercise-text" id="ex-accusativo-trascina-01-text">${exercise.text}</div>
            <div class="word-options" id="ex-accusativo-trascina-01-options"></div>
            <div class="controls">
                <button class="btn btn-primary" id="ex-accusativo-trascina-01-check">Verifica</button>
                <button class="btn btn-secondary" id="ex-accusativo-trascina-01-next" style="display:none;">Prossimo</button>
                <div class="feedback" id="ex-accusativo-trascina-01-feedback"></div>
            </div>
        `;

        const exerciseText = exerciseContainer.querySelector('#ex-accusativo-trascina-01-text');
        const wordOptionsContainer = exerciseContainer.querySelector('#ex-accusativo-trascina-01-options');
        const checkBtn = exerciseContainer.querySelector('#ex-accusativo-trascina-01-check');
        const nextBtn = exerciseContainer.querySelector('#ex-accusativo-trascina-01-next');
        const feedback = exerciseContainer.querySelector('#ex-accusativo-trascina-01-feedback');

        const placeholderPattern = /\{\{(\d+)\}\}/g;
        let textContent = exercise.text;

        textContent = textContent.replace(placeholderPattern, (match, number) => {
            return `<span class="gap" data-gap="${number}"></span>`;
        });

        exerciseText.innerHTML = textContent;

        gapElements = Array.from(exerciseText.querySelectorAll('.gap'));
        wordElements = [];

        exercise.words.forEach((word, idx) => {
            const wordElement = document.createElement('div');
            wordElement.className = 'word-option';
            wordElement.textContent = word;
            wordElement.dataset.word = word;
            wordElement.dataset.index = idx;
            wordElement.addEventListener('click', () => handleWordClick(wordElement));
            wordOptionsContainer.appendChild(wordElement);
            wordElements.push(wordElement);
        });

        gapElements.forEach(gap => {
            gap.addEventListener('click', () => handleGapClick(gap));
        });

        checkBtn.addEventListener('click', () => checkAnswers(exercise, feedback, nextBtn, checkBtn));
        nextBtn.addEventListener('click', () => {
            currentExerciseIndex++;
            loadExercise(currentExerciseIndex);
        });
    }

    function handleWordClick(wordElement) {
        if (wordElement.classList.contains('used') || checked) return;

        const emptyGap = gapElements.find(gap => !gap.classList.contains('filled'));
        if (!emptyGap) return;

        const word = wordElement.dataset.word;
        emptyGap.textContent = word;
        emptyGap.classList.add('filled');
        emptyGap.dataset.wordIndex = wordElement.dataset.index;
        emptyGap.dataset.word = word;
        wordElement.classList.add('used');
    }

    function handleGapClick(gap) {
        if (checked) return;
        if (!gap.classList.contains('filled')) return;

        const wordIndex = gap.dataset.wordIndex;
        const wordElement = wordElements.find(w => w.dataset.index === wordIndex);

        gap.textContent = '';
        gap.classList.remove('filled');
        delete gap.dataset.wordIndex;
        delete gap.dataset.word;

        if (wordElement) {
            wordElement.classList.remove('used');
        }
    }

    function checkAnswers(exercise, feedback, nextBtn, checkBtn) {
        checked = true;
        let correct = 0;
        let total = Object.keys(exercise.correctAnswers).length;

        gapElements.forEach(gap => {
            const gapNum = parseInt(gap.dataset.gap);
            const userAnswer = gap.dataset.word;
            const correctAnswer = exercise.correctAnswers[gapNum];

            if (userAnswer === correctAnswer) {
                gap.classList.remove('filled');
                gap.classList.add('correct');
                correct++;
            } else {
                gap.classList.add('incorrect');
            }
        });

        exerciseResults.push({ correct, total });
        feedback.textContent = `Corretto: ${correct} / ${total}`;
        checkBtn.style.display = 'none';
        nextBtn.style.display = 'inline-block';
    }

    function showCompletion() {
        exerciseContainer.style.display = 'none';
        completionScreen.style.display = 'block';

        completionScreen.innerHTML = `
            <div class="completion">
                <h2>Complimenti!</h2>
                <p>Hai completato tutti i ${exercises.length} esercizi.</p>
            </div>
        `;
    }

    loadExercise(currentExerciseIndex);
})();
</script>
        </div>

        <article class="exercise-card" data-status="open" data-target="panel-acc-open-2">
            <span class="exercise-type">Quiz</span>
            <h3 class="exercise-title">–ú–æ—é —Å–µ—Å—Ç—Ä—É –∑–æ–≤—É—Ç ‚Ä¶</h3>
            <span class="card-subtitle">Nomi ¬∑ 1¬™ declinazione</span>
        </article>

        <div class="exercise-panel" id="panel-acc-open-2" hidden>
            <!-- TODO: exercise content -->
        </div>

        <article class="exercise-card" data-status="open" data-target="panel-acc-open-3">
            <span class="exercise-type">Scrivere</span>
            <h3 class="exercise-title">–ö–∞–∫ –∑–æ–≤—É—Ç —Ç–≤–æ–µ–≥–æ –±—Ä–∞—Ç–∞?</h3>
        </article>

        <div class="exercise-panel" id="panel-acc-open-3" hidden>
            <!-- TODO: exercise content -->
        </div>

        <article class="exercise-card" data-status="open" data-target="panel-acc-open-4">
            <span class="exercise-type">Flash cards</span>
            <h3 class="exercise-title">–ú–æ—è —Å–µ–º—å—è</h3>
        </article>

        <div class="exercise-panel" id="panel-acc-open-4" hidden>
            <!-- TODO: exercise content -->
        </div>

        <article class="exercise-card" data-status="locked">
            <span class="exercise-type">Quiz</span>
            <h3 class="exercise-title">Scegli la forma corretta</h3>
            <div class="exercise-meta">
                <span class="exercise-label label-locked">üîí Bloccato</span>
                <button class="exercise-button button-unlock" data-action="unlock">Sblocca</button>
            </div>
        </article>

        <article class="exercise-card" data-status="locked">
            <span class="exercise-type">Scrivere</span>
            <h3 class="exercise-title">Completa il dialogo</h3>
            <div class="exercise-meta">
                <span class="exercise-label label-locked">üîí Bloccato</span>
                <button class="exercise-button button-unlock" data-action="unlock">Sblocca</button>
            </div>
        </article>

        <article class="exercise-card" data-status="locked">
            <span class="exercise-type">Flash cards</span>
            <h3 class="exercise-title">Verbi con l'accusativo</h3>
            <div class="exercise-meta">
                <span class="exercise-label label-locked">üîí Bloccato</span>
                <button class="exercise-button button-unlock" data-action="unlock">Sblocca</button>
            </div>
        </article>

        <article class="exercise-card" data-status="locked">
            <span class="exercise-type">Drag &amp; Drop</span>
            <h3 class="exercise-title">Ordina le parole</h3>
            <div class="exercise-meta">
                <span class="exercise-label label-locked">üîí Bloccato</span>
                <button class="exercise-button button-unlock" data-action="unlock">Sblocca</button>
            </div>
        </article>

        <article class="exercise-card" data-status="locked">
            <span class="exercise-type">Scrivere</span>
            <h3 class="exercise-title">Rispondi alle domande</h3>
            <div class="exercise-meta">
                <span class="exercise-label label-locked">üîí Bloccato</span>
                <button class="exercise-button button-unlock" data-action="unlock">Sblocca</button>
            </div>
        </article>

        <article class="exercise-card" data-status="locked">
            <span class="exercise-type">Esercizio</span>
            <h3 class="exercise-title">Esercizio avanzato</h3>
            <div class="exercise-meta">
                <span class="exercise-label label-locked">üîí Bloccato</span>
                <button class="exercise-button button-unlock" data-action="unlock">Sblocca</button>
            </div>
        </article>

    </main>

    <section class="cta-section">
        <h2 class="cta-title">Sblocca tutti gli esercizi</h2>
        <p class="cta-text">Accedi a tutti gli esercizi di questo argomento e continua a praticare senza limiti.</p>
        <button class="cta-button" data-action="unlock-all">Sblocca ora</button>
    </section>

    <script>
    (function() {
        const openCards = document.querySelectorAll('[data-status="open"]');

        openCards.forEach(card => {
            card.addEventListener('click', function(e) {
                if (e.target.closest('button')) return;

                const targetPanelId = this.getAttribute('data-target');
                const targetPanel = document.getElementById(targetPanelId);

                if (!targetPanel) return;

                const isCurrentlyOpen = !targetPanel.hidden;

                document.querySelectorAll('.exercise-panel').forEach(panel => {
                    panel.hidden = true;
                });

                if (!isCurrentlyOpen) {
                    targetPanel.hidden = false;

                    if (!targetPanel.hasAttribute('data-initialized')) {
                        const lazyScript = targetPanel.querySelector('[data-lazy-script]');
                        if (lazyScript) {
                            const scriptCode = lazyScript.textContent;
                            const execScript = document.createElement('script');
                            execScript.textContent = scriptCode;
                            targetPanel.appendChild(execScript);
                            targetPanel.setAttribute('data-initialized', 'true');
                        }
                    }
                }
            });
        });
    })();
    </script>

</body>
</html>
